<?xml version="1.0" ?>
<sdf version="1.10">
  <model name="px4_x500_lidar_rgb">
    <pose>0 0 0.25 0 0 0</pose>
    <static>false</static>
    <self_collide>false</self_collide>
    <allow_auto_disable>false</allow_auto_disable>

    <link name="base_link">
      <pose>0 0 0 0 0 0</pose>
      <inertial>
        <mass>1.20</mass>
        <inertia>
          <ixx>0.00281</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.00281</iyy>
          <iyz>0.0</iyz>
          <izz>0.00512</izz>
        </inertia>
      </inertial>
      <collision name="base_collision">
        <geometry>
          <box>
            <size>0.16 0.16 0.05</size>
          </box>
        </geometry>
      </collision>
      <visual name="base_visual">
        <geometry>
          <box>
            <size>0.16 0.16 0.05</size>
          </box>
        </geometry>
        <material>
          <ambient>0.14 0.14 0.14 1</ambient>
          <diffuse>0.14 0.14 0.14 1</diffuse>
        </material>
      </visual>
      <visual name="arm_visual_1">
        <pose>0 0 0.01 0 0 0.785398</pose>
        <geometry>
          <box>
            <size>0.42 0.015 0.015</size>
          </box>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.2 0.2 0.2 1</diffuse>
        </material>
      </visual>
      <visual name="arm_visual_2">
        <pose>0 0 0.01 0 0 -0.785398</pose>
        <geometry>
          <box>
            <size>0.42 0.015 0.015</size>
          </box>
        </geometry>
        <material>
          <ambient>0.2 0.2 0.2 1</ambient>
          <diffuse>0.2 0.2 0.2 1</diffuse>
        </material>
      </visual>
      <!-- Bright marker to keep the drone visible in wide arena views -->
      <visual name="visibility_beacon_visual">
        <pose>0 0 0.09 0 0 0</pose>
        <geometry>
          <sphere>
            <radius>0.045</radius>
          </sphere>
        </geometry>
        <material>
          <ambient>0.95 0.10 0.10 1</ambient>
          <diffuse>0.95 0.10 0.10 1</diffuse>
          <emissive>0.35 0.03 0.03 1</emissive>
        </material>
      </visual>
      <battery name="main_battery">
        <voltage>16.8</voltage>
      </battery>
      <sensor name="tof_down_sensor" type="gpu_lidar">
        <pose>0 0 -0.04 0 -1.570796 0</pose>
        <topic>tof_scan</topic>
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <lidar>
          <scan>
            <horizontal>
              <samples>1</samples>
              <resolution>1</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </horizontal>
            <vertical>
              <samples>1</samples>
              <resolution>1</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.05</min>
            <max>10.0</max>
            <resolution>0.01</resolution>
          </range>
        </lidar>
        <visualize>false</visualize>
      </sensor>
    </link>

    <link name="battery_link">
      <pose>0 0 -0.045 0 0 0</pose>
      <inertial>
        <mass>0.622</mass>
        <inertia>
          <ixx>0.000169</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.001367</iyy>
          <iyz>0.0</iyz>
          <izz>0.001454</izz>
        </inertia>
      </inertial>
      <collision name="battery_collision">
        <geometry>
          <box>
            <size>0.157 0.047 0.038</size>
          </box>
        </geometry>
      </collision>
      <visual name="battery_visual">
        <geometry>
          <box>
            <size>0.157 0.047 0.038</size>
          </box>
        </geometry>
        <material>
          <ambient>0.95 0.82 0.14 1</ambient>
          <diffuse>0.95 0.82 0.14 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="battery_joint" type="fixed">
      <parent>base_link</parent>
      <child>battery_link</child>
    </joint>

    <link name="px4_fcu_link">
      <pose>0 0 0.03 0 0 0</pose>
      <inertial>
        <mass>0.060</mass>
        <inertia>
          <ixx>9.375e-06</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>1.3625e-05</iyy>
          <iyz>0.0</iyz>
          <izz>2.05e-05</izz>
        </inertia>
      </inertial>
      <collision name="px4_fcu_collision">
        <geometry>
          <box>
            <size>0.05 0.04 0.015</size>
          </box>
        </geometry>
      </collision>
      <visual name="px4_fcu_visual">
        <geometry>
          <box>
            <size>0.05 0.04 0.015</size>
          </box>
        </geometry>
        <material>
          <ambient>0.07 0.12 0.3 1</ambient>
          <diffuse>0.07 0.12 0.3 1</diffuse>
        </material>
      </visual>
      <sensor name="imu_sensor" type="imu">
        <always_on>1</always_on>
        <update_rate>250</update_rate>
        <topic>imu</topic>
      </sensor>
    </link>

    <joint name="px4_fcu_joint" type="fixed">
      <parent>base_link</parent>
      <child>px4_fcu_link</child>
    </joint>

    <link name="lidar_link">
      <pose>0 0 0.065 0 0 0</pose>
      <inertial>
        <mass>0.190</mass>
        <inertia>
          <ixx>8.744e-05</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>8.744e-05</iyy>
          <iyz>0.0</iyz>
          <izz>1.372e-04</izz>
        </inertia>
      </inertial>
      <collision name="lidar_collision">
        <geometry>
          <cylinder>
            <radius>0.038</radius>
            <length>0.041</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="lidar_visual">
        <geometry>
          <cylinder>
            <radius>0.038</radius>
            <length>0.041</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.72 0.12 0.12 1</ambient>
          <diffuse>0.72 0.12 0.12 1</diffuse>
        </material>
      </visual>
      <sensor name="lidar_2d_sensor" type="gpu_lidar">
        <topic>lidar_2d</topic>
        <always_on>1</always_on>
        <update_rate>10</update_rate>
        <lidar>
          <scan>
            <horizontal>
              <samples>720</samples>
              <resolution>1</resolution>
              <min_angle>-2.35619</min_angle>
              <max_angle>2.35619</max_angle>
            </horizontal>
            <vertical>
              <samples>1</samples>
              <resolution>1</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.1</min>
            <max>30.0</max>
            <resolution>0.01</resolution>
          </range>
        </lidar>
        <visualize>true</visualize>
      </sensor>

      <sensor name="terrain_lidar_sensor" type="gpu_lidar">
        <pose>0 0 0 0 -0.52 0</pose>
        <topic>lidar_terrain_scan</topic>
        <always_on>1</always_on>
        <update_rate>14</update_rate>
        <lidar>
          <scan>
            <horizontal>
              <samples>1080</samples>
              <resolution>1</resolution>
              <min_angle>-3.14159</min_angle>
              <max_angle>3.14159</max_angle>
            </horizontal>
            <vertical>
              <samples>1</samples>
              <resolution>1</resolution>
              <min_angle>0</min_angle>
              <max_angle>0</max_angle>
            </vertical>
          </scan>
          <range>
            <min>0.15</min>
            <max>35.0</max>
            <resolution>0.005</resolution>
          </range>
        </lidar>
        <visualize>false</visualize>
      </sensor>
    </link>

    <joint name="lidar_joint" type="fixed">
      <parent>base_link</parent>
      <child>lidar_link</child>
    </joint>

    <link name="front_rgb_camera_link">
      <pose>0.10 0.0 0.020 0 0.523599 0</pose>
      <inertial>
        <mass>0.004</mass>
        <inertia>
          <ixx>2.37e-07</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>3.53e-07</iyy>
          <iyz>0.0</iyz>
          <izz>4.17e-07</izz>
        </inertia>
      </inertial>
      <collision name="front_rgb_camera_collision">
        <geometry>
          <box>
            <size>0.025 0.024 0.012</size>
          </box>
        </geometry>
      </collision>
      <visual name="front_rgb_camera_visual">
        <geometry>
          <box>
            <size>0.025 0.024 0.012</size>
          </box>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1</ambient>
          <diffuse>0.05 0.05 0.05 1</diffuse>
        </material>
      </visual>
      <sensor name="front_rgb_camera" type="camera">
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <topic>front_rgb_camera/image_raw</topic>
        <camera>
          <horizontal_fov>1.15192</horizontal_fov>
          <image>
            <width>1280</width>
            <height>720</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>120</far>
          </clip>
        </camera>
        <visualize>true</visualize>
      </sensor>
    </link>

    <joint name="front_rgb_camera_joint" type="fixed">
      <parent>base_link</parent>
      <child>front_rgb_camera_link</child>
    </joint>

    <link name="down_rgb_camera_link">
      <pose>0.0 0.0 -0.082 0 1.570796 0</pose>
      <inertial>
        <mass>0.004</mass>
        <inertia>
          <ixx>2.37e-07</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>3.53e-07</iyy>
          <iyz>0.0</iyz>
          <izz>4.17e-07</izz>
        </inertia>
      </inertial>
      <collision name="down_rgb_camera_collision">
        <geometry>
          <box>
            <size>0.025 0.024 0.012</size>
          </box>
        </geometry>
      </collision>
      <visual name="down_rgb_camera_visual">
        <geometry>
          <box>
            <size>0.025 0.024 0.012</size>
          </box>
        </geometry>
        <material>
          <ambient>0.05 0.05 0.05 1</ambient>
          <diffuse>0.05 0.05 0.05 1</diffuse>
        </material>
      </visual>
      <sensor name="down_rgb_camera" type="camera">
        <always_on>1</always_on>
        <update_rate>30</update_rate>
        <topic>down_rgb_camera/image_raw</topic>
        <camera>
          <horizontal_fov>1.15192</horizontal_fov>
          <image>
            <width>1280</width>
            <height>720</height>
            <format>R8G8B8</format>
          </image>
          <clip>
            <near>0.05</near>
            <far>120</far>
          </clip>
        </camera>
        <visualize>true</visualize>
      </sensor>
    </link>

    <joint name="down_rgb_camera_joint" type="fixed">
      <parent>base_link</parent>
      <child>down_rgb_camera_link</child>
    </joint>

    <link name="landing_leg_front_left">
      <pose>0.145 0.115 -0.125 0 0 0</pose>
      <inertial>
        <mass>0.024</mass>
        <inertia>
          <ixx>8.6e-05</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>8.6e-05</iyy>
          <iyz>0.0</iyz>
          <izz>1.2e-06</izz>
        </inertia>
      </inertial>
      <collision name="landing_leg_front_left_collision">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="landing_leg_front_left_visual">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_leg_front_left_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_leg_front_left</child>
    </joint>

    <link name="landing_leg_front_right">
      <pose>0.145 -0.115 -0.125 0 0 0</pose>
      <inertial>
        <mass>0.024</mass>
        <inertia>
          <ixx>8.6e-05</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>8.6e-05</iyy>
          <iyz>0.0</iyz>
          <izz>1.2e-06</izz>
        </inertia>
      </inertial>
      <collision name="landing_leg_front_right_collision">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="landing_leg_front_right_visual">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_leg_front_right_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_leg_front_right</child>
    </joint>

    <link name="landing_leg_rear_left">
      <pose>-0.145 0.115 -0.125 0 0 0</pose>
      <inertial>
        <mass>0.024</mass>
        <inertia>
          <ixx>8.6e-05</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>8.6e-05</iyy>
          <iyz>0.0</iyz>
          <izz>1.2e-06</izz>
        </inertia>
      </inertial>
      <collision name="landing_leg_rear_left_collision">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="landing_leg_rear_left_visual">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_leg_rear_left_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_leg_rear_left</child>
    </joint>

    <link name="landing_leg_rear_right">
      <pose>-0.145 -0.115 -0.125 0 0 0</pose>
      <inertial>
        <mass>0.024</mass>
        <inertia>
          <ixx>8.6e-05</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>8.6e-05</iyy>
          <iyz>0.0</iyz>
          <izz>1.2e-06</izz>
        </inertia>
      </inertial>
      <collision name="landing_leg_rear_right_collision">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="landing_leg_rear_right_visual">
        <geometry>
          <cylinder>
            <radius>0.0085</radius>
            <length>0.19</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_leg_rear_right_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_leg_rear_right</child>
    </joint>

    <link name="landing_pair_front_skid">
      <pose>0.145 0.0 -0.205 0 0 0</pose>
      <inertial>
        <mass>0.028</mass>
        <inertia>
          <ixx>1.58e-04</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>2.17e-06</iyy>
          <iyz>0.0</iyz>
          <izz>1.60e-04</izz>
        </inertia>
      </inertial>
      <collision name="landing_pair_front_skid_collision">
        <geometry>
          <box>
            <size>0.028 0.26 0.012</size>
          </box>
        </geometry>
      </collision>
      <visual name="landing_pair_front_skid_visual">
        <geometry>
          <box>
            <size>0.028 0.26 0.012</size>
          </box>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_pair_front_skid_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_pair_front_skid</child>
    </joint>

    <link name="landing_pair_rear_skid">
      <pose>-0.145 0.0 -0.205 0 0 0</pose>
      <inertial>
        <mass>0.028</mass>
        <inertia>
          <ixx>1.58e-04</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>2.17e-06</iyy>
          <iyz>0.0</iyz>
          <izz>1.60e-04</izz>
        </inertia>
      </inertial>
      <collision name="landing_pair_rear_skid_collision">
        <geometry>
          <box>
            <size>0.028 0.26 0.012</size>
          </box>
        </geometry>
      </collision>
      <visual name="landing_pair_rear_skid_visual">
        <geometry>
          <box>
            <size>0.028 0.26 0.012</size>
          </box>
        </geometry>
        <material>
          <ambient>0.16 0.16 0.16 1</ambient>
          <diffuse>0.16 0.16 0.16 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="landing_pair_rear_skid_joint" type="fixed">
      <parent>base_link</parent>
      <child>landing_pair_rear_skid</child>
    </joint>

    <link name="rotor_0">
      <pose>0.1768 0.1768 0.030 0 0 0</pose>
      <inertial>
        <mass>0.030</mass>
        <inertia>
          <ixx>0.0001175</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.0001175</iyy>
          <iyz>0.0</iyz>
          <izz>0.0002344</izz>
        </inertia>
      </inertial>
      <collision name="rotor_0_collision">
        <geometry>
          <cylinder>
            <radius>0.1524</radius>
            <length>0.008</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="rotor_0_hub_visual">
        <geometry>
          <cylinder>
            <radius>0.020</radius>
            <length>0.010</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.06 0.06 0.06 1</ambient>
          <diffuse>0.06 0.06 0.06 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_0_blade_a_visual">
        <pose>0.0762 0.0 0.0 0 0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_0_blade_b_visual">
        <pose>-0.0762 0.0 0.0 0 0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="rotor_0_joint" type="revolute">
      <parent>base_link</parent>
      <child>rotor_0</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <link name="rotor_1">
      <pose>-0.1768 0.1768 0.030 0 0 0</pose>
      <inertial>
        <mass>0.030</mass>
        <inertia>
          <ixx>0.0001175</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.0001175</iyy>
          <iyz>0.0</iyz>
          <izz>0.0002344</izz>
        </inertia>
      </inertial>
      <collision name="rotor_1_collision">
        <geometry>
          <cylinder>
            <radius>0.1524</radius>
            <length>0.008</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="rotor_1_hub_visual">
        <geometry>
          <cylinder>
            <radius>0.020</radius>
            <length>0.010</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.06 0.06 0.06 1</ambient>
          <diffuse>0.06 0.06 0.06 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_1_blade_a_visual">
        <pose>0.0762 0.0 0.0 0 -0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_1_blade_b_visual">
        <pose>-0.0762 0.0 0.0 0 -0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="rotor_1_joint" type="revolute">
      <parent>base_link</parent>
      <child>rotor_1</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <link name="rotor_2">
      <pose>-0.1768 -0.1768 0.030 0 0 0</pose>
      <inertial>
        <mass>0.030</mass>
        <inertia>
          <ixx>0.0001175</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.0001175</iyy>
          <iyz>0.0</iyz>
          <izz>0.0002344</izz>
        </inertia>
      </inertial>
      <collision name="rotor_2_collision">
        <geometry>
          <cylinder>
            <radius>0.1524</radius>
            <length>0.008</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="rotor_2_hub_visual">
        <geometry>
          <cylinder>
            <radius>0.020</radius>
            <length>0.010</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.06 0.06 0.06 1</ambient>
          <diffuse>0.06 0.06 0.06 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_2_blade_a_visual">
        <pose>0.0762 0.0 0.0 0 0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_2_blade_b_visual">
        <pose>-0.0762 0.0 0.0 0 0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="rotor_2_joint" type="revolute">
      <parent>base_link</parent>
      <child>rotor_2</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <link name="rotor_3">
      <pose>0.1768 -0.1768 0.030 0 0 0</pose>
      <inertial>
        <mass>0.030</mass>
        <inertia>
          <ixx>0.0001175</ixx>
          <ixy>0.0</ixy>
          <ixz>0.0</ixz>
          <iyy>0.0001175</iyy>
          <iyz>0.0</iyz>
          <izz>0.0002344</izz>
        </inertia>
      </inertial>
      <collision name="rotor_3_collision">
        <geometry>
          <cylinder>
            <radius>0.1524</radius>
            <length>0.008</length>
          </cylinder>
        </geometry>
      </collision>
      <visual name="rotor_3_hub_visual">
        <geometry>
          <cylinder>
            <radius>0.020</radius>
            <length>0.010</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>0.06 0.06 0.06 1</ambient>
          <diffuse>0.06 0.06 0.06 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_3_blade_a_visual">
        <pose>0.0762 0.0 0.0 0 -0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
      <visual name="rotor_3_blade_b_visual">
        <pose>-0.0762 0.0 0.0 0 -0.10 0</pose>
        <geometry>
          <box>
            <size>0.150 0.022 0.004</size>
          </box>
        </geometry>
        <material>
          <ambient>0.10 0.10 0.10 1</ambient>
          <diffuse>0.10 0.10 0.10 1</diffuse>
        </material>
      </visual>
    </link>

    <joint name="rotor_3_joint" type="revolute">
      <parent>base_link</parent>
      <child>rotor_3</child>
      <axis>
        <xyz>0 0 1</xyz>
        <limit>
          <lower>-1e16</lower>
          <upper>1e16</upper>
        </limit>
      </axis>
    </joint>

    <!-- PX4-compatible motor command endpoint (via ESC relay): /model/px4_x500_lidar_rgb/command/motor_speed_faulted -->
    <plugin filename="gz-sim-multicopter-motor-model-system" name="gz::sim::systems::MulticopterMotorModel">
      <robotNamespace>model/px4_x500_lidar_rgb</robotNamespace>
      <jointName>rotor_0_joint</jointName>
      <linkName>rotor_0</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>1.269e-05</motorConstant>
      <momentConstant>0.016754</momentConstant>
      <commandSubTopic>command/motor_speed_faulted</commandSubTopic>
      <actuator_number>0</actuator_number>
      <rotorDragCoefficient>2.0673e-04</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>motor_speed/0</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system" name="gz::sim::systems::MulticopterMotorModel">
      <robotNamespace>model/px4_x500_lidar_rgb</robotNamespace>
      <jointName>rotor_1_joint</jointName>
      <linkName>rotor_1</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>1.269e-05</motorConstant>
      <momentConstant>0.016754</momentConstant>
      <commandSubTopic>command/motor_speed_faulted</commandSubTopic>
      <actuator_number>1</actuator_number>
      <rotorDragCoefficient>2.0673e-04</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>motor_speed/1</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system" name="gz::sim::systems::MulticopterMotorModel">
      <robotNamespace>model/px4_x500_lidar_rgb</robotNamespace>
      <jointName>rotor_2_joint</jointName>
      <linkName>rotor_2</linkName>
      <turningDirection>ccw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>1.269e-05</motorConstant>
      <momentConstant>0.016754</momentConstant>
      <commandSubTopic>command/motor_speed_faulted</commandSubTopic>
      <actuator_number>2</actuator_number>
      <rotorDragCoefficient>2.0673e-04</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>motor_speed/2</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="gz-sim-multicopter-motor-model-system" name="gz::sim::systems::MulticopterMotorModel">
      <robotNamespace>model/px4_x500_lidar_rgb</robotNamespace>
      <jointName>rotor_3_joint</jointName>
      <linkName>rotor_3</linkName>
      <turningDirection>cw</turningDirection>
      <timeConstantUp>0.0125</timeConstantUp>
      <timeConstantDown>0.025</timeConstantDown>
      <maxRotVelocity>1000.0</maxRotVelocity>
      <motorConstant>1.269e-05</motorConstant>
      <momentConstant>0.016754</momentConstant>
      <commandSubTopic>command/motor_speed_faulted</commandSubTopic>
      <actuator_number>3</actuator_number>
      <rotorDragCoefficient>2.0673e-04</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-06</rollingMomentCoefficient>
      <motorSpeedPubTopic>motor_speed/3</motorSpeedPubTopic>
      <rotorVelocitySlowdownSim>10</rotorVelocitySlowdownSim>
      <motorType>velocity</motorType>
    </plugin>

    <plugin filename="gz-sim-multicopter-control-system" name="gz::sim::systems::MulticopterVelocityControl">
      <robotNamespace>model/px4_x500_lidar_rgb</robotNamespace>
      <commandSubTopic>gazebo/command/twist</commandSubTopic>
      <enableSubTopic>enable</enableSubTopic>
      <comLinkName>base_link</comLinkName>
      <velocityGain>6 6 10</velocityGain>
      <attitudeGain>4 4 2</attitudeGain>
      <angularRateGain>0.7 0.7 0.7</angularRateGain>
      <maximumLinearAcceleration>1 1 2</maximumLinearAcceleration>
      <maximumLinearVelocity>5 5 5</maximumLinearVelocity>
      <maximumAngularVelocity>3 3 3</maximumAngularVelocity>

      <rotorConfiguration>
        <rotor>
          <jointName>rotor_0_joint</jointName>
          <forceConstant>1.269e-05</forceConstant>
          <momentConstant>1.6754e-2</momentConstant>
          <direction>1</direction>
        </rotor>
        <rotor>
          <jointName>rotor_1_joint</jointName>
          <forceConstant>1.269e-05</forceConstant>
          <momentConstant>1.6754e-2</momentConstant>
          <direction>-1</direction>
        </rotor>
        <rotor>
          <jointName>rotor_2_joint</jointName>
          <forceConstant>1.269e-05</forceConstant>
          <momentConstant>1.6754e-2</momentConstant>
          <direction>1</direction>
        </rotor>
        <rotor>
          <jointName>rotor_3_joint</jointName>
          <forceConstant>1.269e-05</forceConstant>
          <momentConstant>1.6754e-2</momentConstant>
          <direction>-1</direction>
        </rotor>
      </rotorConfiguration>
    </plugin>

    <plugin filename="gz-sim-linearbatteryplugin-system" name="gz::sim::systems::LinearBatteryPlugin">
      <battery_name>main_battery</battery_name>
      <voltage>16.8</voltage>
      <open_circuit_voltage_constant_coef>16.8</open_circuit_voltage_constant_coef>
      <open_circuit_voltage_linear_coef>-8.0</open_circuit_voltage_linear_coef>
      <initial_charge>6.2</initial_charge>
      <capacity>6.2</capacity>
      <resistance>0.04</resistance>
      <smooth_current_tau>1.95</smooth_current_tau>
      <power_load>15.0</power_load>
      <start_on_motion>true</start_on_motion>
    </plugin>

    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher"/>
    <plugin filename="gz-sim-odometry-publisher-system" name="gz::sim::systems::OdometryPublisher">
      <dimensions>3</dimensions>
    </plugin>
  </model>
</sdf>
